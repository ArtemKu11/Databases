(function(){"use strict";var e={9365:function(e,t,n){var r=n(9242),a=n(3396);const o={class:"base-container"},l={class:"header-container"},s={class:"center-container"},i={class:"footer-container"};function u(e,t,n,r,u,c){const d=(0,a.up)("NavBar"),h=(0,a.up)("MainTextArea"),b=(0,a.up)("UnderButton");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",l,[(0,a.Wm)(d,{onClearFormClick:c.enableTextArea,onGetQuery:c.getQuery},null,8,["onClearFormClick","onGetQuery"])]),(0,a._)("div",s,[(0,a.Wm)(h,{onDblClick:c.doubleClickHandle,enabledFlag:u.textAreaEnabledFlag,modelValue:u.areaText,"onUpdate:modelValue":t[0]||(t[0]=e=>u.areaText=e)},null,8,["onDblClick","enabledFlag","modelValue"])]),(0,a._)("div",i,[(0,a.Wm)(b,{onButtonClick:c.underButtonClick,enabledFlag:u.buttonEnabledFlag},null,8,["onButtonClick","enabledFlag"])])])}const c=e=>((0,a.dD)("data-v-0d6bed37"),e=e(),(0,a.Cn)(),e),d={class:"nav nav-pills"},h={class:"nav-item"},b={class:"nav-item dropdown"},g=c((()=>(0,a._)("a",{class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",role:"button","aria-expanded":"false"},"Получить запрос",-1))),T={class:"dropdown-menu"};function v(e,t,n,r,o,l){const s=(0,a.up)("DropDownItem");return(0,a.wg)(),(0,a.iD)("ul",d,[(0,a._)("li",h,[(0,a._)("a",{onClick:t[0]||(t[0]=e=>this.$emit("clearFormClick")),class:"nav-link active","aria-current":"page"},"Очистить форму")]),(0,a._)("li",b,[g,(0,a._)("ul",T,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.elements,(e=>((0,a.wg)(),(0,a.j4)(s,{onGetQuery:l.clickHandler,key:e,itemText:e},null,8,["onGetQuery","itemText"])))),128))])])])}var m=n(7139);const f={class:"dropdown-item"};function E(e,t,n,r,o,l){return(0,a.wg)(),(0,a.iD)("li",{onClick:t[0]||(t[0]=e=>this.$emit("getQuery",n.itemText))},[(0,a._)("a",f,(0,m.zw)(n.itemText),1)])}var p={name:"DropDownItem",props:["itemText"]},y=n(89);const C=(0,y.Z)(p,[["render",E],["__scopeId","data-v-8d985116"]]);var S=C,x={name:"NavBar",components:{DropDownItem:S},data(){return{elements:["SELECT ALL","TRUNCATE TABLE","DROP TABLE","CREATE TABLE","INSERT","FIRST SELECT","SECOND SELECT","THIRD SELECT"]}},methods:{clickHandler(e){this.$emit("getQuery",e)}}};const Q=(0,y.Z)(x,[["render",v],["__scopeId","data-v-0d6bed37"]]);var k=Q;const L=e=>((0,a.dD)("data-v-51423e54"),e=e(),(0,a.Cn)(),e),R={key:0,class:"form-floating"},F=["value"],A=L((()=>(0,a._)("label",{for:"floatingTextarea"},"SQL Query",-1))),w={key:1,class:"form-floating"},_=["value"],D=L((()=>(0,a._)("label",{for:"floatingTextarea"},"Result",-1)));function I(e,t,n,r,o,l){return n.enabledFlag?((0,a.wg)(),(0,a.iD)("div",R,[(0,a._)("textarea",{ref:"activeTextArea",class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea",value:n.modelValue,onChange:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},null,40,F),A])):((0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("textarea",{readonly:"",class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea",value:n.modelValue,onChange:t[1]||(t[1]=t=>e.$emit("update:modelValue",t.target.value)),onDblclick:t[2]||(t[2]=(...e)=>l.doubleClickEvent&&l.doubleClickEvent(...e))},null,40,_),D]))}var O={name:"MainTextArea",props:["enabledFlag","modelValue"],emits:["update:modelValue","dblClick"],components:{},methods:{doubleClickEvent(){this.$emit("dblClick"),setTimeout((()=>{null!==this.$refs.activeTextArea&&this.$refs.activeTextArea.focus()}),100)}}};const P=(0,y.Z)(O,[["render",I],["__scopeId","data-v-51423e54"]]);var B=P;function j(e,t,n,r,o,l){return n.enabledFlag?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=e=>this.$emit("buttonClick"))},"Отправить")):((0,a.wg)(),(0,a.iD)("button",{key:1,type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=e=>this.$emit("buttonClick"))},"Очистить форму"))}var N={name:"UnderButton",components:{},props:["enabledFlag"],emits:["buttonClick"]};const $=(0,y.Z)(N,[["render",j]]);var V=$,U=n(7327);class H{getTruncateTableQuery(){return this.getServerSQLQuery("TRUNCATE")}getDropTableQuery(){return this.getServerSQLQuery("DROP")}getCreateTableQuery(){return this.getServerSQLQuery("CREATE")}getInsertTableQuery(){return this.getServerSQLQuery("INSERT")}getFirstSelectQuery(){return this.getServerSQLQuery("FIRST_SELECT")}getSecondSelectQuery(){return this.getServerSQLQuery("SECOND_SELECT")}getThirdSelectQuery(){return this.getServerSQLQuery("THIRD_SELECT")}getSelectAllQuery(){return this.getServerSQLQuery("SELECT_ALL")}getServerSQLQuery(e){let t={"Content-Type":"application/json"};return fetch(`${H.SERVER_URL}get_query?type=${e}`,{method:"GET",headers:t})}executeQuery(e){let t={query:e},n={"Content-Type":"application/json"};return fetch(`${H.SERVER_URL}execute`,{method:"POST",body:JSON.stringify(t),headers:n})}}(0,U.Z)(H,"SERVER_URL","/");var M=H,Z={name:"App",components:{NavBar:k,MainTextArea:B,UnderButton:V},data(){return{textAreaEnabledFlag:!0,buttonEnabledFlag:!0,areaText:"",serverConnector:new M,lastQuery:"",needToShowLastQueryIfExc:!1}},methods:{underButtonClick(){if(this.buttonEnabledFlag){let e=this.areaText;if(0===e.length)this.areaText="Запрос не может быть пустым. Попробуйте еще раз",this.textAreaEnabledFlag=!this.textAreaEnabledFlag,this.buttonEnabledFlag=!this.buttonEnabledFlag;else{let e=this.serverConnector.executeQuery(this.areaText);this.handleQueryResultPromose(e)}}else this.areaText="",this.textAreaEnabledFlag=!this.textAreaEnabledFlag,this.buttonEnabledFlag=!this.buttonEnabledFlag},handleQueryResultPromose(e){e.then((e=>(400==e.status?(this.needToShowLastQueryIfExc=!0,this.lastQuery=this.areaText):this.needToShowLastQueryIfExc=!1,e.json().then((e=>{this.textAreaEnabledFlag=!this.textAreaEnabledFlag,this.buttonEnabledFlag=!this.buttonEnabledFlag;let t="";for(let n of e.result)t+=n+"\n";this.areaText=t})))))},enableTextArea(){this.areaText="",this.textAreaEnabledFlag=!0,this.buttonEnabledFlag=!0},doubleClickHandle(){this.needToShowLastQueryIfExc?this.areaText=this.lastQuery:this.areaText="",this.textAreaEnabledFlag=!0,this.buttonEnabledFlag=!0},getQuery(e){let t;switch(e){case"TRUNCATE TABLE":t=this.serverConnector.getTruncateTableQuery(),this.handleResponsePromise(t);break;case"DROP TABLE":t=this.serverConnector.getDropTableQuery(),this.handleResponsePromise(t);break;case"CREATE TABLE":t=this.serverConnector.getCreateTableQuery(),this.handleResponsePromise(t);break;case"INSERT":t=this.serverConnector.getInsertTableQuery(),this.handleResponsePromise(t);break;case"FIRST SELECT":t=this.serverConnector.getFirstSelectQuery(),this.handleResponsePromise(t);break;case"SECOND SELECT":t=this.serverConnector.getSecondSelectQuery(),this.handleResponsePromise(t);break;case"THIRD SELECT":t=this.serverConnector.getThirdSelectQuery(),this.handleResponsePromise(t);break;case"SELECT ALL":t=this.serverConnector.getSelectAllQuery(),this.handleResponsePromise(t);break}},handleResponsePromise(e){this.needToShowLastQueryIfExc=!1,e.then((e=>e.json().then((e=>{this.enableTextArea(),this.areaText=e.query}))))}}};const G=(0,y.Z)(Z,[["render",u]]);var q=G;n(5654);(0,r.ri)(q).mount("#app")}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,function(){var e=[];n.O=function(t,r,a,o){if(!r){var l=1/0;for(c=0;c<e.length;c++){r=e[c][0],a=e[c][1],o=e[c][2];for(var s=!0,i=0;i<r.length;i++)(!1&o||l>=o)&&Object.keys(n.O).every((function(e){return n.O[e](r[i])}))?r.splice(i--,1):(s=!1,o<l&&(l=o));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,a,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var a,o,l=r[0],s=r[1],i=r[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(i)var c=i(n)}for(t&&t(r);u<l.length;u++)o=l[u],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(c)},r=self["webpackChunkdatabases"]=self["webpackChunkdatabases"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(9365)}));r=n.O(r)})();
//# sourceMappingURL=app.a7af4159.js.map